"use strict";var C=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var Z=(r,o)=>{for(var s in o)C(r,s,{get:o[s],enumerable:!0})},$=(r,o,s,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of z(o))!Y.call(r,n)&&n!==s&&C(r,n,{get:()=>o[n],enumerable:!(t=W(o,n))||t.enumerable});return r};var rr=r=>$(C({},"__esModule",{value:!0}),r);var Fr={};Z(Fr,{default:()=>vr});module.exports=rr(Fr);var R=["A","K","Q","J","T","9","8","7","6","5","4","3","2"],H=["s","h","c","d"];var g=[2,3,5,7,11,13,17,19,23,29,31,37,41],or=10,sr=166,tr=322,nr=1599,ir=1609,cr=2467,ur=3325,ar=6185,K=new Map,A=new Map;function fr(){let r=[7936,3968,1984,992,496,248,124,62,31,4111],o=[],s=hr(31);for(let n=0;n<1286;n++){let i=s.next().value,c=!0;for(let u of r)i^u||(c=!1);c&&o.push(i)}let t=1;for(let n of r){let i=M(n);K.set(i,t),t+=1}t=tr+1;for(let n=o.length-1;n>=0;n--){let i=M(o[n]);K.set(i,t),t+=1}er(r,o)}function er(r,o){let s=nr+1;for(let t of r){let n=M(t);A.set(n,s),s+=1}s=ar+1;for(let t=o.length-1;t>=0;t--){let n=M(o[t]);A.set(n,s),s+=1}}function lr(){let r=[12,11,10,9,8,7,6,5,4,3,2,1,0],o=or+1;for(let t of r){let n=[...r];y(n,t);for(let i of n){let c=g[t]**4*g[i];A.set(c,o),o+=1}}o=sr+1;for(let t of r){let n=[...r];y(n,t);for(let i of n){let c=g[t]**3*g[i]**2;A.set(c,o),o+=1}}o=ir+1;for(let t of r){let n=[...r];y(n,t);let i=P(n,2);for(let c of i){let u=c[0],f=c[1],a=g[t]**3*g[u]*g[f];A.set(a,o),o+=1}}o=cr+1;let s=P(r,2);for(let t of s){let n=t[0],i=t[1],c=[...r];y(c,n),y(c,i);for(let u of c){let f=g[n]**2*g[i]**2*g[u];A.set(f,o),o+=1}}o=ur+1;for(let t of r){let n=[...r];y(n,t);let i=P(n,3);for(let c of i){let u=c[0],f=c[1],a=c[2],e=g[t]**2*g[u]*g[f]*g[a];A.set(e,o),o+=1}}}function*hr(r){let o=(r|r-1)+1,s=o|(Math.floor((o&-o)/(r&-r))>>1)-1;for(yield s;;)o=(s|s-1)+1,s=o|(Math.floor((o&-o)/(s&-s))>>1)-1,yield s}function y(r,o){let s=r.indexOf(o);s>-1&&r.splice(s,1)}function P(r,o){if(o>r.length||o===0)return[];let s=[];for(let n=o-1;n>=0;n--)s.push(n);let t=[];for(;;){let n=[];for(let i of s)n.push(r[i]);t.push(n);for(let i=0;i<o;i++)if(s[i]+=1,s[i]<r.length-i){for(let c=i-1;c>=0;c--)s[c]=s[c+1]+1;break}if(s[0]>=r.length)break}return t}function M(r){let o=1;for(let s=0;s<=12;s++)r&1<<s&&(o*=g[s]);return o}fr();lr();var L=[2,3,5,7,11,13,17,19,23,29,31,37,41],dr={2:0,3:1,4:2,5:3,6:4,7:5,8:6,9:7,T:8,J:9,Q:10,K:11,A:12},pr={s:1,h:2,d:4,c:8},x=r=>{let o=r[0],s=r[1],t=dr[o],n=pr[s],i=L[t],c=1<<t<<16,u=n<<12,f=t<<8;return c|u|f|i};var _=(r,o)=>{if(o>r.length||o===0)return[];let s=[];for(let n=o-1;n>=0;n--)s.push(n);let t=[];for(;;){let n=[];for(let i=0;i<o;i++)n.push(r[s[i]]);t.push(n);for(let i=0;i<o;i++)if(s[i]+=1,s[i]<r.length-i){for(let c=i-1;c>=0;c--)s[c]=s[c+1]+1;break}if(s[0]>=r.length)break}return t},U=r=>[[r[0],r[1],r[2],r[3],r[4]],[r[0],r[1],r[2],r[3],r[5]],[r[0],r[1],r[2],r[3],r[6]],[r[0],r[1],r[2],r[4],r[5]],[r[0],r[1],r[2],r[4],r[6]],[r[0],r[1],r[2],r[5],r[6]],[r[0],r[1],r[3],r[4],r[5]],[r[0],r[1],r[3],r[4],r[6]],[r[0],r[1],r[3],r[5],r[6]],[r[0],r[1],r[4],r[5],r[6]],[r[0],r[2],r[3],r[4],r[5]],[r[0],r[2],r[3],r[4],r[6]],[r[0],r[2],r[3],r[5],r[6]],[r[0],r[2],r[4],r[5],r[6]],[r[0],r[3],r[4],r[5],r[6]],[r[1],r[2],r[3],r[4],r[5]],[r[1],r[2],r[3],r[4],r[6]],[r[1],r[2],r[3],r[5],r[6]],[r[1],r[2],r[4],r[5],r[6]],[r[1],r[3],r[4],r[5],r[6]],[r[2],r[3],r[4],r[5],r[6]]],I=r=>[[r[0],r[1],r[2],r[3],r[4]],[r[0],r[1],r[2],r[3],r[5]],[r[0],r[1],r[2],r[4],r[5]],[r[0],r[1],r[3],r[4],r[5]],[r[0],r[2],r[3],r[4],r[5]],[r[1],r[2],r[3],r[4],r[5]]],D=(r,o)=>{let s=o.concat(r),t=7462;if(s.length===7){let n=U(s);for(let i of n){let c=J(i);c<t&&(t=c)}return t}else if(s.length===6){let n=I(s);for(let i of n){let c=J(i);c<t&&(t=c)}return t}else if(s.length===5)return J(s);return t};var J=r=>{if(r[0]&r[1]&r[2]&r[3]&r[4]&61440){let o=(r[0]|r[1]|r[2]|r[3]|r[4])>>16,s=V(o);return K.get(s)||7462}else{let o=G(r);return A.get(o)||7462}},G=r=>r.reduce((o,s)=>o*(s&255),1),V=r=>{let o=1;for(let s=0;s<=12;s++)r&1<<s&&(o*=L[s]);return o},w=r=>{let o=Math.min(...r);return r.reduce((s,t,n)=>(t===o&&s.push(n),s),[])},X=(r,o)=>{let s=o.concat(r),t=7462;if(s.length===7){let n=U(s);for(let i=0;i<n.length;i++){let c=N(n[i]);c<t&&(t=c)}return t}else if(s.length===6){let n=I(s);for(let i=0;i<n.length;i++){let c=N(n[i]);c<t&&(t=c)}return t}else if(s.length===5)return J(s);throw"Unexpected number of cards"},T=(r,o)=>{let s=o.concat(r),t=7462;if(s.length===7){let n=U(s);for(let i=0;i<n.length;i++){let c=B(n[i]);c<t&&(t=c)}return t}else if(s.length===6){let n=I(s);for(let i=0;i<n.length;i++){let c=B(n[i]);c<t&&(t=c)}return t}else if(s.length===5)return J(s);throw"Unexpected number of cards"},N=r=>{let o=G(r);return A.get(o)},B=r=>{let o=(r[0]|r[1]|r[2]|r[3]|r[4])>>16,s=V(o);return K.get(s)};var b=[4096,8192,16384,32768],gr=[[1],[1,1],[1,2,1],[1,3,3,1],[1,4,6,4,1],[1,5,10,10,5,1]],O=(r,o)=>o>r?0:gr[r][o],br=r=>{let o=[],s=[];for(let t=0;t<R.length;t++){let n=[],i=[];for(let c=0;c<4;c++){let u=x(R[t]+H[c]);r.has(u)||(n.push(u),i.push(b[c]))}o.push(n),s.push(i)}return{cards:o,cardSuits:s}},Ar=r=>{let o=new Map;for(let s of r)o.set(s,(o.get(s)||0)+1);return o},Tr=(r,o)=>{let s=1;for(let[t,n]of r)s*=O(o.cards[t].length,n);return s},j=r=>{let o=0,s=-1;for(let[t,n]of r)n>o&&(o=n,s=t);return[s,o]},mr=r=>{let o=[];for(let[s,t]of r)t===2&&o.push(s);return o},yr=(r,o)=>r.size===3?Sr(r,o):r.size===4?Kr(r,o):r.size===5?Jr(r,o):[],Sr=(r,o)=>{let s=[],t=j(r),n;if(t[1]===2){let[i,c]=mr(r);n=(o.cards[i].length-1)*(o.cards[c].length-1)}else n=O(o.cards[t[0]].length-1,2);for(let i=0;i<b.length;i++){let c=b[i],u=[];for(let f of r.keys())if(o.cardSuits[f].includes(c))u.push(o.cards[f][0]&4294905855|c);else break;u.length===3&&s.push({board:u,numVariations:n,color:c,num:3})}return s},Kr=(r,o)=>{let s=[],t=j(r),n,i=Array.from(r.keys()),c=_(i,3);for(let u=0;u<c.length;u++){let f=c[u],a=i.filter(e=>!f.includes(e));for(let e=0;e<b.length;e++){let h=b[e],l=[];for(let d of f)if(o.cardSuits[d].includes(h))l.push(o.cards[d][0]&4294905855|h);else break;l.length===3&&(o.cardSuits[a[0]].includes(h)?a[0]===t[0]?n=O(o.cards[t[0]].length-1,2):n=(o.cards[t[0]].length-1)*(o.cards[a[0]].length-1):a[0]===t[0]?n=O(o.cards[t[0]].length,2):n=(o.cards[t[0]].length-1)*o.cards[a[0]].length,s.push({board:l,numVariations:n,color:h,num:3}))}}n=o.cards[t[0]].length-1;for(let u=0;u<b.length;u++){let f=b[u],a=[];for(let e of r.keys())if(o.cardSuits[e].includes(f))a.push(o.cards[e][0]&4294905855|f);else break;a.length===4&&s.push({board:a,numVariations:n,color:f,num:4})}return s},Jr=(r,o)=>{let s=[],t,n=Array.from(r.keys()),i=_(n,3);for(let c=0;c<i.length;c++){let u=i[c],f=n.filter(a=>!u.includes(a));for(let a=0;a<b.length;a++){let e=b[a],h=[];for(let l of u)if(o.cardSuits[l].includes(e))h.push(o.cards[l][0]&4294905855|e);else break;if(h.length===3){let l=o.cardSuits[f[0]].includes(e),d=o.cardSuits[f[1]].includes(e);l&&d?t=(o.cards[f[0]].length-1)*(o.cards[f[1]].length-1):l?t=(o.cards[f[0]].length-1)*o.cards[f[1]].length:d?t=o.cards[f[0]].length*(o.cards[f[1]].length-1):t=o.cards[f[0]].length*o.cards[f[1]].length,s.push({board:h,numVariations:t,color:e,num:3})}}}i=_(n,4);for(let c=0;c<i.length;c++){let u=i[c],f=n.filter(a=>!u.includes(a));for(let a=0;a<b.length;a++){let e=b[a],h=[];for(let l of u)if(o.cardSuits[l].includes(e))h.push(o.cards[l][0]&4294905855|e);else break;h.length===4&&(o.cardSuits[f[0]].includes(e)?t=o.cards[f[0]].length-1:t=o.cards[f[0]].length,s.push({board:h,numVariations:t,color:e,num:4}))}}for(let c=0;c<b.length;c++){let u=b[c],f=[];for(let a of r.keys())if(o.cardSuits[a].includes(u))f.push(o.cards[a][0]&4294905855|u);else break;f.length===5&&s.push({board:f,numVariations:1,color:u,num:5})}return s},S=(r,o)=>(r&61440)===o,xr=(r,o,s,t,n)=>{if(n===3)return S(r[0],t)&&S(r[1],t)?Math.min(s,T(r,o)):s;if(n===4){let i=S(r[0],t),c=S(r[1],t);return i&&c?Math.min(s,T(r,o)):i?Math.min(s,T([r[0]],o)):c?Math.min(s,T([r[1]],o)):s}else if(n===5){let i=S(r[0],t),c=S(r[1],t);return i&&c?Math.min(s,T(r,o)):i?Math.min(s,T([r[0]],o)):c?Math.min(s,T([r[1]],o)):Math.min(s,T([],o))}throw"Unexpected number of flushes"},_r=r=>{let o=new Array(r.length).fill(0),s=new Array(r.length).fill(0),t=0,n=new Set;for(let u of r)n.add(u[0]),n.add(u[1]);let i=br(n),c=[0,0,0,0,0];for(;;){let u=Ar(c),f=!0;for(let[a,e]of u)if(e>i.cards[a].length){f=!1;break}if(f){let a=Tr(u,i),e=[];for(let p=0;p<5;p++)e.push(i.cards[c[p]][0]);let h=[];for(let p=0;p<r.length;p++)h.push(X(r[p],e));let l=0,d=yr(u,i);for(let p=0;p<d.length;p++){let k=d[p],v=k.numVariations;if(v===0)continue;let E=[];for(let m=0;m<r.length;m++)E.push(xr(r[m],k.board,h[m],k.color,k.num));let F=w(E);if(F.length>1)for(let m=0;m<F.length;m++)s[F[m]]+=v;else o[F[0]]+=v;l+=v}let Q=w(h);if(Q.length>1)for(let p=0;p<Q.length;p++)s[Q[p]]+=a-l;else o[Q[0]]+=a-l;t+=a}for(let a=0;a<5;a++)if(c[a]+=1,c[a]<13){for(let e=a-1;e>=0;e--)c[e]=c[a];break}if(c[4]>12)break}return[o,s,t]},wr=[69634,73730,81922,98306,135427,139523,147715,164099,266757,270853,279045,295429,529159,533255,541447,557831,1053707,1057803,1065995,1082379,2102541,2106637,2114829,2131213,4199953,4204049,4212241,4228625,8394515,8398611,8406803,8423187,16783383,16787479,16795671,16812055,33560861,33564957,33573149,33589533,67115551,67119647,67127839,67144223,134224677,134228773,134236965,134253349,268442665,268446761,268454953,268471337],Qr=r=>{let o=[];for(let s of wr)r.includes(s)||o.push(s);return o},q=(r,o)=>{let s=[];for(let u of r)s.push([x(u[0]),x(u[1])]);let t=o.map(x);if(t.length<3)return _r(s);let n=0,i=new Array(s.length).fill(0),c=new Array(s.length).fill(0);if(t.length===5){let u=[];for(let a of s)u.push(D(t,a));let f=w(u);if(f.length>1)for(let a of f)c[a]+=1;else i[f[0]]+=1;n+=1}else{let u=Qr(t.concat(...s)),f=_(u,5-t.length);for(let a of f){let e=t.concat(a),h=[];for(let d=0;d<s.length;d++)h.push(D(e,s[d]));let l=w(h);if(l.length>1)for(let d of l)c[d]+=1;else i[l[0]]+=1;n+=1}}return[i,c,n]};var kr=(r,o)=>{if(r==null)return JSON.stringify({error:"u need to put hands"});if(o===void 0)return JSON.stringify({error:"parsing board"});if(r.length%4)return JSON.stringify({error:"check what u wrote in hands wrong length"});let s=o?.length?o.length:0;if(s%2||s>10)return JSON.stringify({error:"board wrong length"});for(var t=[],n=0;n<r.length/4;n++){var i=n*4,c=r.slice(i,i+2),u=r.slice(i+2,i+4);if(!c&&!u)return JSON.stringify({error:"error parsing hands"});t[n]=[c,u]}var f=[];if(s>0)var f=o?.match(/.{1,2}/g);let a=q(t,f),e=t.map((h,l)=>{var d=a[2];return{[h.join("")]:{win:a[0][l]/d,tie:a[1][l]/d}}});return JSON.stringify(e,null,2)},vr=kr;
